<!DOCTYPE html>

<head>
    <script src="https://unpkg.com/jquery"></script>
    <script src="https://unpkg.com/survey-jquery@1.9.5/survey.jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />


    <script src="https://unpkg.com/materialize-stepper@3.1.0/dist/js/mstepper.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/materialize-stepper@3.1.0/dist/css/mstepper.min.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://code.getmdl.io/1.1.3/material.min.js"></script>
    <script type="text/javascript" src="js/materialize.min.js"></script>

    <style>
        blockquote {
            border-left: 5px solid #2196f3;
        }
        
        .btn,
        .btn-large,
        .btn-small,
        .btn-flat {
            border-radius: 4px;
            font-weight: 500;
        }
        
        .card:hover {
            box-shadow: 0px 10px 35px 0px rgba(0, 0, 0, 0.18);
        }
        
        .card {
            border-radius: 15px;
            box-shadow: 0px 5px 25px 0px rgba(0, 0, 0, 0.15);
        }
    </style>


    <title>Dove sono i miei dati?</title>
</head>

<body>
    <script type="text/javascript" src="./stepper.min.js"></script>
    <div class="section grey lighten-5">
        <div class="container">
            <div class="row">


                <h3 class="light center-align blue-text">Dove sono i miei dati?</h3>
                <div class="card">
                    <div class="card-content">


                        <ul class="stepper horizontal linear">

                            <li class="step active">
                                <div class="step-title waves-effect waves-dark">Introduzione</div>
                                <div class="step-content">
                                    <div class="row">
                                        <blockquote>
                                            Benvenut*! Sto conducendo un'indagine sulle reazioni delle persone quando vengono a conoscenza di essere state <b>vittime di data breach</b>. Un data breach è una violazione di sicurezza che comporta - accidentalmente
                                            o in modo illecito - la distruzione, la perdita, la modifica, la divulgazione non autorizzata o l’accesso ai dati personali trasmessi, conservati o comunque trattati.
                                        </blockquote>
                                        <blockquote>
                                            Nei prossimi passaggi potrai scoprire se sei mai stat* vittima di un data breach e potrai sapere quali e quanti. Alla fine ti chiederò di compilare un piccolo questionario che mi sarà molto utile.
                                        </blockquote>
                                        <blockquote>
                                            D'accordo? Fai tap o clicca su Avanti!
                                        </blockquote>

                                        <blockquote>
                                            Ci tengo ad informarti che <b>in nessun modo</b> i tuoi dati che fornirai verranno salvati sul server. Il sondaggio finale è del tutto <b>anonimo</b>.
                                        </blockquote>
                                    </div>
                                    <div class="step-actions">
                                        <button class="waves-effect waves-dark btn blue next-step" data-feedback="anyThing">Avanti</button>
                                    </div>
                                </div>
                            </li>
                            <li class="step">
                                <div class="step-title waves-effect waves-dark">La tua e-mail</div>
                                <div class="step-content">
                                    <div class="row">
                                        <blockquote>Inserisci qui il tuo indirizzo e-mail che usi più di frequente (ad esempio quello che usi per registrarti ad un sito). Ancora una volta ti ricordiamo che <b>non verrà conservato</b> da nessuna parte, nel rispetto
                                            della tua privacy.
                                        </blockquote>
                                        <div class="input-field col s12">
                                            <input id="email" name="email" type="email" class="validate" required>
                                            <label for="email" class="black-text">La tua e-mail</label>
                                        </div>
                                    </div>
                                    <div class="step-actions">
                                        <button class="waves-effect waves-dark btn-flat previous-step">Indietro</button>
                                        <button class="waves-effect waves-dark btn blue next-step" onclick="myAPI()" data-feedback="anyThing">Avanti</button>

                                    </div>
                                </div>
                            </li>

                            <li class="step">
                                <div class="step-title waves-effect waves-dark">Risultato</div>

                                <div class="step-content">

                                    <div class="row">

                                        <div id="risultato"></div>
                                        <div id="divLista"></div>

                                    </div>

                                    <div class="step-actions" style="position: static">
                                        <button class="waves-effect waves-dark btn-flat previous-step">Indietro</button>
                                        <button id="continuaAlSondaggio" class="waves-effect waves-dark btn blue next-step" onclick="checkMobileAndCreaSondaggio()">Avanti</button>


                                    </div>


                                </div>
                            </li>



                            <li class="step">
                                <div class="step-title waves-effect waves-dark">Sondaggio</div>
                                <div class="step-content">
                                    <blockquote>Ti chiediamo per favore di compilare questo sondaggio. Se sei da <b>smartphone</b>, ti consigliamo di ruotarlo in <b>modalità orizzontale</b>. Grazie!
                                    </blockquote>
                                    <div class="container">
                                        <div id="surveyContainer"></div>
                                    </div>

                                </div>
                                <div class="step-actions">
                                    <button class="waves-effect waves-dark btn-flat previous-step">Indietro</button>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="modalRuotaDispositivo" class="modal">
        <div class="modal-content">
            <h4>Ruota il tuo dispositivo! <i class="material-icons">rotate_90_degrees_ccw</i>
            </h4>
            <p>Hey, abbiamo notato che ci stai visitando da uno smartphone. Per la compilazione del sondaggio ti consigliamo di ruotarlo in modalità orizzontale. Grazie!
            </p>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-close waves-effect waves-green btn-flat">OK</a>
        </div>
    </div>

    <footer class="page-footer light-blue">
        <div class="container">
            <div class="row">
                <div class="col l6 s12">
                    <h5 class="white-text">Ulteriori informazioni</h5>
                    <p class="grey-text text-lighten-4">Mi chiamo Andrea Salvucci, sono uno studente di Ingegneria Informatica all'Università degli Studi di Bologna. Questo sito web è stato realizzato come progetto d'esame per il corso "Cybersecurity M" tenuto dal prof. <a class="grey-text text-lighten-3"
                            href="https://www.unibo.it/sitoweb/michele.colajanni">Michele Colajanni</a>.
                    </p>
                    <h5 class="white-text">Paper di riferimento</h5>
                    <p class="grey-text-lighten-4">
                        L'articolo scientifico sul quale mi sono basato per condurre questo esperimento è reperibile <a class="grey-text text-lighten-3" href="https://www.usenix.org/conference/usenixsecurity21/presentation/mayer"><u>a questo link</u></a>
                    </p>
                </div>
                <div class="col l4 offset-l2 s12">
                    <h5 class="white-text">Contattami</h5>
                    <p>Se vuoi darmi qualche suggerimento o fornirmi il tuo parere, allora ti prego di contattarmi facendo <a class="grey-text text-lighten-3" href="mailto:andrea.salvucci@studio.unibo.it"><u>click qui</u></a></p>
                    <h5 class="white-text">Alcuni link utili</h5>
                    <ul>
                        <li><a class="grey-text text-lighten-3" href="https://www.garanteprivacy.it/regolamentoue/databreach">Che cos'è un data breach</a></li>
                        <li><a class="grey-text text-lighten-3" href="https://www.ilsole24ore.com/art/privacy-che-cos-e-gdpr-e-perche-ci-riguarda-AEYGnchE">Che cos'è il GDPR</a></li>
                        <li><a class="grey-text text-lighten-3" href="https://www.youtube.com/watch?v=NS46CxpNXSA">Perché dovresti acquisire consapevolezza (video)</a></li>
                        <li><a class="grey-text text-lighten-3" href="https://haveibeenpwned.com/">Have I been PWNED?</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-copyright">
            <div class="container">
                <p class="grey-text text-lighten-4">
                    <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img class="center-align" alt="Licenza Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />Quest'opera è distribuita con Licenza <a class="grey-text text-lighten-4" rel="license"
                        href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribuzione - Non commerciale - Condividi allo stesso modo 4.0 Internazionale</a>.
                </p>
            </div>
        </div>
    </footer>


    <script type="text/javascript">
        $(document).ready(function() {
            $('.modalRuotaDispositivo').modal();
        });

        {
            var vittima = false;
        }

        function checkMobileAndCreaSondaggio() {
            const isMobile = window.matchMedia("only screen and (max-width: 760px)").matches;

            if (isMobile) {
                const myModal = document.getElementById("modalRuotaDispositivo");
                const instance = M.Modal.init(myModal, {
                    dismissible: false
                });
                instance.open();
            }
            creaSondaggio();

        }

        if (!(typeof(componentHandler) == 'undefined')) {
            componentHandler.upgradeAllRegistered();
        }

        function anyThing(destroyFeedback) {
            setTimeout(function() {
                destroyFeedback(true);
            }, 1500);
        }

        function noThing(destroyFeedback) {
            setTimeout(function() {
                destroyFeedback(true);
            }, 10000);
        }

        var stepperDiv = document.querySelector('.stepper');
        console.log(stepperDiv);
        var stepper = new MStepper(stepperDiv);
    </script>


    <script type="text/javascript">
        function myAPI() {
            pulisciStep2();
            email = document.getElementById("email").value;
            url_encoded_email = encodeURIComponent(email)

            console.log('la mail selezionata e ' + email)
            console.log('la mail url encoded e ' + url_encoded_email)


            fetch('./hibp?email=' + url_encoded_email)
                .then(response => response.json())
                .then(data => printBreach(data))
                .catch(e => console.log(e));


        }

        function pulisciStep2() {
            divRisultato = document.getElementById("risultato");
            divRisultato.innerHTML = "";

            divLista = document.getElementById("divLista");
            divLista.innerHTML = "";

            bottoneAlSondaggio = document.getElementById("continuaAlSondaggio");
            bottoneAlSondaggio.disabled = false;
        }

        function openInNewTab(url) {
            window.open(url, '_blank').focus();
        }



        function printBreach(data) {
            console.log(data.ok);
            if (data.ok == "ok") {
                divRisultato = document.getElementById("risultato");
                h2Risultato = document.createElement('h2');
                blockquoteRisultato = document.createElement('blockquote');
                blockquoteRisultato.innerHTML = "Il tuo indirizzo e-mail non risulta in nessuno dei data breach a nostra conoscenza. Puoi provare con un" +
                    " altro indirizzo o proseguire con un breve sondaggio. Grazie!";
                h2Risultato.innerHTML = "Buone notizie!";
                divRisultato.appendChild(h2Risultato);
                divRisultato.appendChild(blockquoteRisultato);
                //bottoneAlSondaggio = document.getElementById("continuaAlSondaggio");
                //bottoneAlSondaggio.disabled = "false";
            } else {
                vittima = true;
                divRisultato = document.getElementById("risultato");
                h2Risultato = document.createElement('h2');
                blockquoteRisultato = document.createElement('blockquote');
                blockquoteRisultato.innerHTML = "Il tuo indirizzo e-mail è stato trovato in " + data.length + " data breach. Di seguito la lista. Se fai <b>click o tap</b> sul singolo elemento, ti verrà mostrata " +
                    "una breve <b>descrizione dell'accaduto</b> e potrai sapere <b>quali dati ti hanno rubato</b>.";
                h2Risultato.innerHTML = "Pessime notizie!";
                divRisultato.appendChild(h2Risultato);
                divRisultato.appendChild(blockquoteRisultato);
                divLista = document.getElementById("divLista");
                lista = document.createElement('ul');
                lista.className = "collapsible";

                divLista.appendChild(lista);
                console.log(data);
                var contaFinoATre = 0;
                for (i in data) {
                    breach = data[i];
                    elemento = document.createElement('li');
                    collapsibleHeader = document.createElement('div');





                    collapsibleBody = document.createElement('div');
                    collapsibleHeader.className = "collapsible-header";
                    collapsibleBody.className = "collapsible-body";
                    intestazioneDescrizione = document.createElement('li');
                    intestazioneDescrizione.className = "collection-header";
                    intestazioneDescrizione.innerHTML = "<h5>Descrizione del breach (ENG)</h5>"
                    collapsibleBody.appendChild(intestazioneDescrizione);
                    contenuto = document.createElement('span');
                    collapsibleHeader.innerHTML = breach.Name;
                    if (contaFinoATre < 3) {
                        contaFinoATre++;
                        primo = false;
                        leggimi = document.createElement('span');
                        leggimi.className = "new badge blue";
                        leggimi.setAttribute("data-badge-caption", "Info");
                        collapsibleHeader.appendChild(leggimi);

                    }

                    getDescrizione(breach.Name, contenuto);

                    collapsibleBody.appendChild(contenuto);
                    elemento.appendChild(collapsibleHeader);
                    elemento.appendChild(collapsibleBody);
                    lista.appendChild(elemento);

                }
                $(document).ready(function() {
                    $('.collapsible').collapsible();
                })
            }
            urlemail = "/hibp?email=" + email
        }



        function getDescrizione(nomeBreach, elemento) {

            var descrizione = "Nessuna descrizione disponibile";

            fetch('https://haveibeenpwned.com/api/v2/breach/' + nomeBreach)
                .then(response => response.json())
                .then(data => {


                    listaCoseRubate = document.createElement('ul');
                    listaCoseRubate.className = "collection";
                    intestazioneLista = document.createElement('li');
                    intestazioneLista.className = "collection-header";
                    intestazioneLista.innerHTML = "<h5>Cosa ti hanno rubato</h5>"
                    listaCoseRubate.appendChild(intestazioneLista);
                    for (cosaRubata in data.DataClasses) {
                        elementoRubato = document.createElement('li');
                        elementoRubato.className = "collection-item";
                        elementoRubato.innerHTML = data.DataClasses[cosaRubata];
                        console.log(data.DataClasses[cosaRubata]);
                        listaCoseRubate.appendChild(elementoRubato);
                    }
                    elemento.innerHTML = data.Description;
                    elemento.appendChild(listaCoseRubate);

                })
                .catch(e => console.log(e));
            return descrizione;
        }

        function creaSondaggio() {

            Survey
                .StylesManager
                .applyTheme("darkblue");


            var myCss = {

                "container": "container",
                "navigation": {
                    "complete": "btn sv_complete_btn",
                    "prev": "btn sv_prev_btn",
                    "next": "waves-effect waves-dark btn blue next-step",
                    "start": "btn sv_start_btn",
                    "preview": "btn sv_preview_btn",
                    "edit": "btn sv_edit_btn"
                }
            };


            var surveyNonVittima = {
                locale: "it",
                pages: [{
                    name: "anagrafica",
                    elements: [{
                        type: "radiogroup",
                        name: "sesso",
                        title: "Sesso",
                        isRequired: true,
                        choices: [{
                            value: "M",
                            text: "M"
                        }, {
                            value: "F",
                            text: "F"
                        }, {
                            value: "NB",
                            text: "Non-binary"
                        }, {
                            value: "NS",
                            text: "Preferisco non specificare"
                        }],
                        hasNone: true,
                        noneText: "Altro",
                        otherText: "Preferisco non specificare"
                    }, {
                        type: "radiogroup",
                        name: "eta",
                        title: "Età",
                        isRequired: true,
                        choices: [{
                            value: "minorenni",
                            text: "<18"
                        }, {
                            value: "diciottoventiquattro",
                            text: "18-24"
                        }, {
                            value: "ventiquattrotrenta",
                            text: "24-30"
                        }, {
                            value: "trentacinquanta",
                            text: "30-50"
                        }, {
                            value: "cinquantasessantacinque",
                            text: "50-65"
                        }, {
                            value: "oversessantacinque",
                            text: ">65"
                        }],
                        noneText: ">50",
                        otherText: "35-50"
                    }, {
                        type: "radiogroup",
                        name: "occupazione",
                        title: "Occupazione",
                        isRequired: true,
                        choices: [{
                            value: "liceale",
                            text: "Sto terminando la scuola superiore"
                        }, {
                            value: "triennale",
                            text: "Sto completando la laurea triennale"
                        }, {
                            value: "magistrale",
                            text: "Sto completando la laurea magistrale"
                        }, {
                            value: "dottorato",
                            text: "Sto completando l'assegno/dottorato di ricerca"
                        }, {
                            value: "lavoratore",
                            text: "Lavoro"
                        }, {
                            value: "disoccupato",
                            text: "Attualmente sono senza occupazione"
                        }],
                        noneText: "Lavoro",
                        otherText: "Sto completando il dottorato/assegno di ricerca"
                    }, {
                        type: "rating",
                        name: "dimestichezza_informatica",
                        title: "Quanta dimestichezza hai con il computer e in generale con l'informatica?",
                        isRequired: true
                    }, {
                        type: "checkbox",
                        name: "per_cosa_utilizza_email",
                        title: "Per cosa utilizzi l'indirizzo di posta elettronica che hai inserito prima?",
                        isRequired: true,
                        choices: [{
                            value: "item1",
                            text: "Posta elettronica personale"
                        }, {
                            value: "item2",
                            text: "Posta elettronica istituzionale (università)"
                        }, {
                            value: "item3",
                            text: "Posta elettronica professionale (lavoro)"
                        }],
                        hasOther: true,
                        otherText: "Altro (descrivi)"
                    }, {
                        type: "radiogroup",
                        name: "da_quanto_tempo_indirizzo",
                        title: "Da quanto tempo usi quell'indirizzo e-mail?",
                        isRequired: true,
                        choices: [{
                            value: "menounanno",
                            text: "Meno di un anno"
                        }, {
                            value: "menocinqueanni",
                            text: "Meno di cinque anni"
                        }, {
                            value: "piucinqueanni",
                            text: "Più di cinque anni"
                        }]
                    }, {
                        type: "radiogroup",
                        name: "condivide_indirizzi",
                        title: "Condividi con qualcuno quell'indirizzo e-mail?",
                        isRequired: true,
                        choices: [{
                            value: "condivideemail",
                            text: "Sì"
                        }, {
                            value: "noncondivideemail",
                            text: "No"
                        }]
                    }, {
                        type: "radiogroup",
                        name: "quanti_altri_indirizzi",
                        title: "Quanti altri indirizzi e-mail possiedi?",
                        isRequired: true,
                        choices: [{
                            value: "nessunaltro",
                            text: "Nessun altro"
                        }, {
                            value: "unaltro",
                            text: "Un altro"
                        }, {
                            value: "piudidue",
                            text: "Più di due"
                        }]
                    }, {
                        type: "radiogroup",
                        name: "usa_2fa",
                        title: "Utilizzi l'autenticazione a due (o più) fattori?",
                        isRequired: true,
                        choices: [{
                            value: "si",
                            text: "Sì, per la maggior parte dei casi"
                        }, {
                            value: "ovunque",
                            text: "Sì, la uso ovunque"
                        }, {
                            value: "solosenecessario",
                            text: "Solo quando richiesto esplicitamente dall'applicazione"
                        }, {
                            value: "no",
                            text: "No"
                        }, {
                            value: "quasi mai",
                            text: "Quasi mai"
                        }, {
                            value: "nonsocose",
                            text: "Non so nemmeno cosa sia!"
                        }]
                    }, {
                        type: "radiogroup",
                        name: "perche_no_2fa",
                        visibleIf: "{usa_2fa} anyof ['no', 'quasi mai']",
                        title: "Perché non utilizzi l'autenticazione multi-fattore?",
                        isRequired: true,
                        choices: [{
                            value: "item1",
                            text: "ci vuole una vita per fare il log-in"
                        }, {
                            value: "item2",
                            text: "non mi va"
                        }, {
                            value: "item3",
                            text: "non credo sia utile"
                        }, {
                            value: "item4",
                            text: "cambio spesso numero di telefono"
                        }],
                        hasOther: true,
                        otherText: "Altro (specifica)"
                    }, {
                        type: "radiogroup",
                        name: "come_gestisci_password",
                        title: "Come gestisci le tue password?",
                        isRequired: true,
                        choices: [{
                            value: "item1",
                            text: "Ne uso solamente una per tutti o la maggior parte dei miei account"
                        }, {
                            value: "item2",
                            text: "Uso molte password diverse per tutti i miei account"
                        }, {
                            value: "item3",
                            text: "Utilizzo un gestore di password (ad es. Keepass)"
                        }, {
                            value: "item4",
                            text: "Le faccio generare per me da Google"
                        }],
                        hasOther: true,
                        otherText: "Altro (descrivi)"
                    }],
                    title: "Sezione 1 - Abitudini",
                    description: "Benvenut* a questo sondaggio, ti preghiamo di rispondere nella tua massima sincerità, per avere dei dati quanto più corretti possibili per lo scopo finale di questa indagine. Le tue risposte saranno trattate in maniera aggregata, in nessun modo sarà possibile risalire alla tua identità. Non ti verrà più chiesto l'indirizzo e-mail e comunque non l'abbiamo salvato da nessuna parte. Grazie e buona compilazione!"
                }, {
                    name: "awareness",
                    elements: [{
                        type: "radiogroup",
                        name: "e_stata_sorpresa_essere_al_sicuro",
                        title: "Non trovare i tuoi dati in dei data breach è stata per te una sorpresa?",
                        isRequired: true,
                        choices: [{
                            value: "item1",
                            text: "Sì"
                        }, {
                            value: "item2",
                            text: "No"
                        }],
                        choicesByUrl: {
                            titleName: "name"
                        }
                    }, {
                        type: "comment",
                        name: "dicci_perche_e_sorpresa",
                        visibleIf: "{e_stata_sorpresa_essere_al_sicuro} = 'item1'",
                        title: "Puoi dirci perché ti ha sorpres*? (brevemente)"
                    }, {
                        type: "comment",
                        name: "question3",
                        visibleIf: "{e_stata_sorpresa_essere_al_sicuro} = 'item2'",
                        title: "Puoi dirci perché NON ti ha sorpres*? (brevemente)"
                    }, {
                        type: "radiogroup",
                        name: "question2",
                        title: "Cosa credi che abbia fatto sì che tu non sia stat* vittima di data breach?",
                        isRequired: true,
                        choices: [{
                            value: "item1",
                            text: "Pura fortuna"
                        }, {
                            value: "item2",
                            text: "Il mio indirizzo e-mail è giovane"
                        }, {
                            value: "item3",
                            text: "Non mi registro così spesso ai siti web"
                        }, {
                            value: "item4",
                            text: "Utilizzo solo servizi web che ritengo \"sicuri\""
                        }, {
                            value: "item5",
                            text: "Non saprei"
                        }],
                        hasOther: true,
                        otherText: "Altro (specifica)"
                    }, {
                        type: "rating",
                        name: "quanto_ti_ritieni_al_sicuro",
                        title: "Quanto ti ritieni \"al sicuro\" ora che sai di non essere vittima di data breach?",
                        isRequired: true
                    }, {
                        type: "checkbox",
                        name: "dati_che_ritiene_piu_importanti",
                        title: "Quali tra i dati che ti potrebbero essere sottratti in futuro ritieni più importanti? (Puoi selezionare più opzioni)",
                        isRequired: true,
                        choices: [{
                            value: "item1",
                            text: "I miei dati anagrafici (nome, cognome, indirizzo di residenza, ...)"
                        }, {
                            value: "item2",
                            text: "Il mio numero di cellulare"
                        }, {
                            value: "item3",
                            text: "Le mie credenziali (nome utente e password)"
                        }, {
                            value: "item4",
                            text: "Dati della mia carta di credito"
                        }],
                        hasOther: true,
                        otherText: "Altro (specifica)",
                        selectAllText: "Altro (specifica)"
                    }],
                    title: "Sezione 2 - Consapevolezza",
                    description: "Come ti abbiamo detto, il tuo indirizzo e-mail non è stato trovato in nessun data breach a nostra conoscenza. Quindi puoi dormire sonni tranquilli...per ora! Ti chiediamo comunque di rispondere a qualche breve domanda"
                }, {
                    name: "risposta_emotiva",
                    elements: [{
                        type: "rating",
                        name: "quanto_sei_preoccupat",
                        title: "Da 1 a 5 quanto saresti preoccupat* per i furti di dati che potresti subire?",
                        minRateDescription: "Per nulla preoccupat*",
                        maxRateDescription: "Estremamente preoccupat*"
                    }, {
                        type: "text",
                        name: "motivo_preoccupazione",
                        title: "Puoi dirci molto brevemente perché?",
                        isRequired: true
                    }],
                    title: "Sezione 3 - Reazioni",
                    description: "In questa sezione ti chiediamo di riportare molto sinteticamente quelle che sono le tue reazioni emotive nel momento in cui potresti venire a conoscenza che i tuoi dati personali sono stati violati."
                }]
            }


            var surveyVittima = {
                locale: "it",
                pages: [{
                    name: "anagrafica",
                    elements: [{
                        type: "radiogroup",
                        name: "sesso",
                        title: "Sesso",
                        isRequired: true,
                        choices: [{
                            value: "M",
                            text: "M"
                        }, {
                            value: "F",
                            text: "F"
                        }, {
                            value: "NB",
                            text: "Non-binary"
                        }, {
                            value: "NS",
                            text: "Preferisco non specificare"
                        }],
                        hasNone: true,
                        noneText: "Altro",
                        otherText: "Preferisco non specificare"
                    }, {
                        type: "radiogroup",
                        name: "eta",
                        title: "Età",
                        isRequired: true,
                        choices: [{
                            value: "minorenni",
                            text: "<18"
                        }, {
                            value: "diciottoventiquattro",
                            text: "18-24"
                        }, {
                            value: "ventiquattrotrenta",
                            text: "24-30"
                        }, {
                            value: "trentacinquanta",
                            text: "30-50"
                        }, {
                            value: "cinquantasessantacinque",
                            text: "50-65"
                        }, {
                            value: "oversessantacinque",
                            text: ">65"
                        }],
                        noneText: ">50",
                        otherText: "35-50"
                    }, {
                        type: "radiogroup",
                        name: "occupazione",
                        title: "Occupazione",
                        isRequired: true,
                        choices: [{
                            value: "liceale",
                            text: "Sto terminando la scuola superiore"
                        }, {
                            value: "triennale",
                            text: "Sto completando la laurea triennale"
                        }, {
                            value: "magistrale",
                            text: "Sto completando la laurea magistrale"
                        }, {
                            value: "dottorato",
                            text: "Sto completando l'assegno/dottorato di ricerca"
                        }, {
                            value: "lavoratore",
                            text: "Lavoro"
                        }, {
                            value: "disoccupato",
                            text: "Attualmente sono senza occupazione"
                        }],
                        noneText: "Lavoro",
                        otherText: "Sto completando il dottorato/assegno di ricerca"
                    }, {
                        type: "rating",
                        name: "dimestichezza_informatica",
                        title: "Quanta dimestichezza hai con il computer e in generale con l'informatica?",
                        isRequired: true
                    }, {
                        type: "checkbox",
                        name: "per_cosa_utilizza_email",
                        title: "Per cosa utilizzi l'indirizzo di posta elettronica che hai inserito prima?",
                        isRequired: true,
                        choices: [{
                            value: "item1",
                            text: "Posta elettronica personale"
                        }, {
                            value: "item2",
                            text: "Posta elettronica istituzionale (università)"
                        }, {
                            value: "item3",
                            text: "Posta elettronica professionale (lavoro)"
                        }],
                        hasOther: true,
                        otherText: "Altro (descrivi)"
                    }, {
                        type: "radiogroup",
                        name: "da_quanto_tempo_indirizzo",
                        title: "Da quanto tempo usi quell'indirizzo e-mail?",
                        isRequired: true,
                        choices: [{
                            value: "menounanno",
                            text: "Meno di un anno"
                        }, {
                            value: "menocinqueanni",
                            text: "Meno di cinque anni"
                        }, {
                            value: "piucinqueanni",
                            text: "Più di cinque anni"
                        }]
                    }, {
                        type: "radiogroup",
                        name: "condivide_indirizzi",
                        title: "Condividi con qualcuno quell'indirizzo e-mail?",
                        isRequired: true,
                        choices: [{
                            value: "condivideemail",
                            text: "Sì"
                        }, {
                            value: "noncondivideemail",
                            text: "No"
                        }]
                    }, {
                        type: "radiogroup",
                        name: "quanti_altri_indirizzi",
                        title: "Quanti altri indirizzi e-mail possiedi?",
                        isRequired: true,
                        choices: [{
                            value: "nessunaltro",
                            text: "Nessun altro"
                        }, {
                            value: "unaltro",
                            text: "Un altro"
                        }, {
                            value: "piudidue",
                            text: "Più di due"
                        }]
                    }, {
                        type: "radiogroup",
                        name: "usa_2fa",
                        title: "Utilizzi l'autenticazione a due (o più) fattori?",
                        isRequired: true,
                        choices: [{
                            value: "si",
                            text: "Sì, per la maggior parte dei casi"
                        }, {
                            value: "ovunque",
                            text: "Sì, la uso ovunque"
                        }, {
                            value: "solosenecessario",
                            text: "Solo quando richiesto esplicitamente dall'applicazione"
                        }, {
                            value: "no",
                            text: "No"
                        }, {
                            value: "quasi mai",
                            text: "Quasi mai"
                        }, {
                            value: "nonsocose",
                            text: "Non so nemmeno cosa sia!"
                        }]
                    }, {
                        type: "radiogroup",
                        name: "perche_no_2fa",
                        visibleIf: "{usa_2fa} anyof ['no', 'quasi mai']",
                        title: "Perché non utilizzi l'autenticazione multi-fattore?",
                        isRequired: true,
                        choices: [{
                            value: "item1",
                            text: "ci vuole una vita per fare il log-in"
                        }, {
                            value: "item2",
                            text: "non mi va"
                        }, {
                            value: "item3",
                            text: "non credo sia utile"
                        }, {
                            value: "item4",
                            text: "cambio spesso numero di telefono"
                        }],
                        hasOther: true,
                        otherText: "Altro (specifica)"
                    }, {
                        type: "radiogroup",
                        name: "come_gestisci_password",
                        title: "Come gestisci le tue password?",
                        isRequired: true,
                        choices: [{
                            value: "item1",
                            text: "Ne uso solamente una per tutti o la maggior parte dei miei account"
                        }, {
                            value: "item2",
                            text: "Uso molte password diverse per tutti i miei account"
                        }, {
                            value: "item3",
                            text: "Utilizzo un gestore di password (ad es. Keepass)"
                        }, {
                            value: "item4",
                            text: "Le faccio generare per me da Google"
                        }],
                        hasOther: true,
                        otherText: "Altro (descrivi)"
                    }],
                    title: "Sezione 1 - Abitudini",
                    description: "Benvenut* a questo sondaggio, ti preghiamo di rispondere nella tua massima sincerità, per avere dei dati quanto più corretti possibili per lo scopo finale di questa indagine. Le tue risposte saranno trattate in maniera aggregata, in nessun modo sarà possibile risalire alla tua identità. Non ti verrà più chiesto l'indirizzo e-mail e comunque non l'abbiamo salvato da nessuna parte. Grazie e buona compilazione!"
                }, {
                    name: "awareness",
                    elements: [{
                        type: "radiogroup",
                        name: "sito_piu_sorpresa",
                        title: "Quale sito ti ha sorpreso di più?",
                        description: "Nota bene: non tutti i nomi che ti abbiamo mostrato corrispondono ad uno specifico sito. A volte è semplicemente il nome con cui il data breach è famoso in rete.",
                        isRequired: true,
                        choices: [
                            "item1",
                            "item2",
                            "item3"
                        ],
                        choicesByUrl: {
                            url: urlemail,
                            titleName: "name"
                        }
                    }, {
                        type: "comment",
                        name: "motivo_sito_piu_sorpresa",
                        title: "Puoi dirci perché?",
                        isRequired: true
                    }, {
                        type: "text",
                        name: "numero_data_breach",
                        title: "Di quanti data breach sei stat* vittima?",
                        description: "Puoi tornare indietro per ri-controllare",
                        isRequired: true,
                        inputType: "number",
                        min: "1"
                    }, {
                        type: "text",
                        name: "quanti_siti_ricorda_di_essersi_registrato",
                        title: "Quanti tra i siti o servizi che ti sono stati mostrati hai memoria di essertici registrat*?",
                        description: "Se nessuno, allora inserisci 0",
                        isRequired: true,
                        inputType: "number"
                    }, {
                        type: "checkbox",
                        name: "dati_che_ritiene_piu_importanti",
                        title: "Quali tra i dati che potrebbero esserti stati sottratti ritieni più importanti? (Puoi selezionare più opzioni)",
                        isRequired: true,
                        choices: [{
                            value: "item1",
                            text: "I miei dati anagrafici (nome, cognome, indirizzo di residenza, ...)"
                        }, {
                            value: "item2",
                            text: "Il mio numero di cellulare"
                        }, {
                            value: "item3",
                            text: "Le mie credenziali (nome utente e password)"
                        }, {
                            value: "item4",
                            text: "Dati della mia carta di credito"
                        }],
                        hasOther: true,
                        otherText: "Altro (specifica)",
                        selectAllText: "Altro (specifica)"
                    }, {
                        type: "comment",
                        name: "speculazione_motivo",
                        title: "Secondo te qual è la causa principale che ha fatto sì che i tuoi dati personali finissero sul Web?",
                        isRequired: true
                    }],
                    title: "Sezione 2 - Consapevolezza",
                    description: "In questa sezione ti chiediamo informazioni sui risultati che ti abbiamo mostrato in precedenza. Ti chiediamo anche di fare delle supposizioni sulla motivazione per la quale i tuoi dati sono stati oggetto di data breach."
                }, {
                    name: "risposta_emotiva",
                    elements: [{
                        type: "rating",
                        name: "quanto_sei_preoccupat",
                        title: "Da 1 a 5 quanto sei preoccupat* per i furti di dati che hai subito?",
                        minRateDescription: "Per nulla preoccupat*",
                        maxRateDescription: "Estremamente preoccupat*"
                    }, {
                        type: "text",
                        name: "motivo_preoccupazione",
                        title: "Puoi dirci molto brevemente perché?",
                        isRequired: true
                    }, {
                        type: "radiogroup",
                        name: "sei_stato_informato",
                        title: "Ti hanno mai informat* di questi data breach?",
                        isRequired: true,
                        choices: [{
                            value: "item1",
                            text: "Sì"
                        }, {
                            value: "item2",
                            text: "No"
                        }, {
                            value: "item3",
                            text: "Non ricordo"
                        }]
                    }, {
                        type: "radiogroup",
                        name: "reazione_non_informato",
                        title: "Se non ti hanno mai informat*, che emozione ti provoca?",
                        isRequired: true,
                        choices: [{
                            value: "item1",
                            text: "Mi lascia totalmente indifferente"
                        }, {
                            value: "item2",
                            text: "Avrei voluto saperlo, ma pazienza"
                        }, {
                            value: "item3",
                            text: "Mi fa rabbia"
                        }],
                        hasOther: true,
                        otherText: "Altro (specifica)"
                    }],
                    title: "Sezione 3 - Reazioni",
                    description: "In questa sezione ti chiediamo di riportare molto sinteticamente quelle che sono le tue reazioni emotive nel momento in cui vieni a conoscenza che i tuoi dati personali sono stati violati."
                }, {
                    name: "provvedimenti",
                    elements: [{
                        type: "rating",
                        name: "question18",
                        title: "Se venissi informato da fonti esterne, con quale probabilità prenderesti provvedimenti da 1 a 5?",
                        description: "Tipicamente sono i media che informano gli utenti di un dato servizio che c'è stato un data breach",
                        isRequired: true
                    }, {
                        type: "rating",
                        name: "prob_provvedimenti_comunicato",
                        title: "Se invece fosse il sito stesso ad informarti, con quale probabilità prenderesti provvedimenti da 1 a 5?",
                        description: "A volte, però, è il sito stesso con dei comunicati stampa ad informare i propri clienti, spesso con risultati disastrosi (vedi il caso di Ho Mobile del 2021)",
                        isRequired: true
                    }, {
                        type: "checkbox",
                        name: "question20",
                        title: "In quest'ultimo caso cosa vorresti sentirti dire dal sito titolare del trattamento dei tuoi dati che è stato violato? (Puoi selezionare più opzioni)",
                        isRequired: true,
                        choices: [{
                            value: "item1",
                            text: "Vorrei delle scuse"
                        }, {
                            value: "item2",
                            text: "Vorrei un risarcimento monetario"
                        }, {
                            value: "item3",
                            text: "Vorrei che ponesse rimedio aumentando la sicurezza dei suoi sistemi"
                        }],
                        hasOther: true,
                        otherText: "Altro (specifica)"
                    }, {
                        type: "checkbox",
                        name: "question21",
                        title: "Cosa hai intenzione di fare ora che sai di aver subito furto di dati? (Puoi selezionare più opzioni)",
                        isRequired: true,
                        choices: [{
                            value: "item1",
                            text: "Cambierò tutte le mie password"
                        }, {
                            value: "item2",
                            text: "Farò più attenzione"
                        }, {
                            value: "item3",
                            text: "Attiverò l'autenticazione a due fattori"
                        }, {
                            value: "item4",
                            text: "Non farò nulla di tutto ciò"
                        }],
                        hasOther: true,
                        noneText: "Non farò nulla di tutto ciò",
                        otherText: "Altro (specifica)",
                        selectAllText: "Ca"
                    }],
                    title: "Sezione 4 - Provvedimenti",
                    description: "In questa quarta e ultima sezione ti chiediamo quali provvedimenti saresti dispost* a prendere"
                }],
                showProgressBar: "top",
                widthMode: "responsive"
            }
            var survey;

            if (vittima) {
                survey = new Survey.Model(surveyVittima);

            } else {
                survey = new Survey.Model(surveyNonVittima);
            }

            $("#surveyContainer").Survey({
                model: survey,
                onComplete: sendDataToServer
            });
            $("#surveyElement").Survey({
                model: survey,
                css: myCss
            });

            function sendDataToServer(survey) {
                if (vittima) {
                    survey.sendResult('773c5f45-4731-4359-8cbe-ef8e864cf970');
                } else {
                    survey.sendResult('2670133f-9221-4608-8f70-501a7f274a88');
                }
            }


        }
    </script>

</body>

</html>