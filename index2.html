<html>

<head>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.indigo-pink.min.css">
<script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>
<!-- Stepper CSS minified -->
<link rel="stylesheet" href="./stepper.min.css">
<!-- Stepper Javascript minified -->
<script defer src="./stepper.min.js"></script>
    <link rel="stylesheet" href="stile.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  
    <title>Sono vittima?</title>
</head>

<body onload="inizio()">
  
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header
    mdl-layout--fixed-tabs">
        <header class="mdl-layout__header">
            <div class="mdl-layout__header-row">
                <!-- Title -->
                <span class="mdl-layout-title">Title</span>
            </div>
          
          
<ul class="mdl-stepper mdl-stepper--linear mdl-stepper--horizontal" id="demo-stepper-linear">
  <li class="mdl-step">
    <span class="mdl-step__label">
              <span class="mdl-step__title">
                <span class="mdl-step__title-text">Inserimento e-mail</span>
    </span>
  
  
  
  
<script type="text/javascript">
        function myAPI() {
            email = document.getElementById("email").value;

            console.log('la mail selezionata e' + email)


            fetch('./hibp?email=' + email)
                .then(response => response.json())
                .then(data => printBreach(data))
                .catch(e => console.log(e));


        }

        function printBreach(data) {
            invisibile("google_form");
            console.log(data.ok);
            if (data.ok == "ok") {
                invisibile("container-lista");
                visibile("ok")
            }
            else {
                invisibile("ok");
                visibile("container-lista");
                visibile("vittima");
                lista = document.getElementById("lista");
                emptyList("lista");
                console.log(data);
                document.getElementById("numero_breach").innerHTML = data.length;
                for (i in data) {
                    breach = data[i];
                    elemento = document.createElement('li');
                    elemento.className = "mdl-list__item";
                    span = document.createElement('span');
                    span.className = "mdl-list__item-primary-content"
                    elemento.appendChild(span);
                    lista.appendChild(elemento);
                    elemento.innerHTML = elemento.innerHTML + breach.Name;
                }
                visibile("google_form");
            }
        }

        function toggleDiv(id) {
            var div = document.getElementById(id);
            div.style.display = div.style.display == "none" ? "block" : "none";
        }

        function invisibile(id) {
            var div = document.getElementById(id);
            div.style.display = "none";

        }
        function visibile(id) {
            var div = document.getElementById(id);
            div.style.display = "block";

        }
        function emptyList(id) {
            root = document.getElementById(id);
            while (root.firstChild) {
                root.removeChild(root.firstChild);
            }
        }

        function inizio() {
            invisibile("vittima");
            invisibile("google_form");
            invisibile("ok");
            invisibile("container-lista");
        }
    </script>
    </div>
</body>

</html>